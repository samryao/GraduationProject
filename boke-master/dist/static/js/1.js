webpackJsonp([1],{gkDR:function(e,r){},rwea:function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=s("mGwb"),n={name:"Login",data:function(){return{err_username_msg:"",err_password_msg:"",err_password2_msg:"",err_email_msg:"",username:"",password:"",login:0,loginTitle:"用户名或密码错误",login_usernameErr:!1,login_passwordErr:!1,loginErr:!1,user:"",user_id:""}},methods:{routeChange:function(){this.login=void 0===this.$route.query.login?1:parseInt(this.$route.query.login),this.url_state=void 0===this.$route.query.url_state?0:this.$route.query.url_state,0===this.url_state?(this.err2005=!1,this.step=1):"urlInvalid"===this.url_state?(this.err2005=!0,this.step=2):"urlErr"===this.url_state&&(this.err2005=!0,this.step=1)},loginEnterFun:function(e){13===(window.event?e.keyCode:e.which)&&this.gotoHome()},gotoHome:function(){var e=this,r=this,s={username:r.username,password:r.password};return""===r.username?(r.err_username_msg="用户名不能为空",void(r.login_usernameErr=!0)):""===r.password?(r.err_password_msg="密码不能为空",void(r.login_passwordErr=!0)):void Object(t.u)(s).then(function(s){if(r.user=s.data.username,r.user_id=s.data.user_id,200!==s.code)r.err_username_msg=s.msg,r.login_usernameErr=!0;else{var t={username:r.user,user_id:r.user_id};e.$store.commit("setUser",t),r.login_usernameErr=!1,r.$message({message:"登录成功",type:"success",duration:1e3});setTimeout(function(){r.$router.push({path:"/home"})},1e3)}})}},components:{},watch:{$route:"routeChange"},created:function(){this.routeChange()}},o={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"background"},[s("div",{staticClass:"loginBox"},[e._m(0),e._v(" "),e._m(1),e._v(" "),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.loginErr,expression:"loginErr"}],attrs:{title:e.loginTitle,type:"error","show-icon":"",closable:!0}}),e._v(" "),s("el-input",{attrs:{type:"email",placeholder:"用户名或邮箱"},model:{value:e.username,callback:function(r){e.username=r},expression:"username"}},[s("el-button",{attrs:{slot:"prepend"},slot:"prepend"},[s("icon",{attrs:{name:"user"}})],1)],1),e._v(" "),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.login_usernameErr,expression:"login_usernameErr"}],attrs:{title:e.err_username_msg,type:"error","show-icon":"",closable:!0}}),e._v(" "),s("el-input",{attrs:{type:"password",placeholder:"密码"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.loginEnterFun(r)}},model:{value:e.password,callback:function(r){e.password=r},expression:"password"}},[s("el-button",{attrs:{slot:"prepend"},slot:"prepend"},[s("icon",{attrs:{name:"lock"}})],1)],1),e._v(" "),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.login_passwordErr,expression:"login_passwordErr"}],attrs:{title:e.err_password_msg,type:"error","show-icon":"",closable:!0}}),e._v(" "),s("div",{staticClass:"lr-btn tcolors-bg",on:{click:e.gotoHome}},[e._v("登录")])],1)])},staticRenderFns:[function(){var e=this.$createElement,r=this._self._c||e;return r("h1",{staticClass:"loginTitle"},[r("a",{attrs:{href:"/"}},[this._v("登录")])])},function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"lr-title"},[r("p",[this._v("\n        新用户"),r("a",{staticClass:"tcolors",attrs:{href:"/register"}},[this._v("注册")])])])}]};var a=s("VU/8")(n,o,!1,function(e){s("gkDR")},null,null);r.default=a.exports}});